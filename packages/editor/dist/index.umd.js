!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("react")):"function"==typeof define&&define.amd?define(["react"],t):e.reactCodeEditor=t(e.react)}(this,function(e){function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},o=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),o.forEach(function(t){n(e,t,r[t])})}return e}function i(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)t.indexOf(n=i[r])>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)t.indexOf(n=i[r])>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function a(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,l=e[Symbol.iterator]();!(r=(a=l.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(o)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function l(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}e=e&&e.hasOwnProperty("default")?e.default:e;var s="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};var c,u,f=(function(n,r){Object.defineProperty(r,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=arguments,n=1;n<arguments.length;n++){var r=t[n];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(e);function l(e,n){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!==t(n)&&"function"!=typeof n?e:n}var c=13,u=9,f=8,d=89,p=90,y=77,h=57,g=219,m=222,v=192,b=100,_=3e3,S="navigator"in s&&/Win/i.test(navigator.platform),k="navigator"in s&&/(Mac|iPhone|iPod|iPad)/i.test(navigator.platform),C="npm__react-simple-code-editor__textarea",E=function(e){function n(){var e,t,r,i=arguments;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);for(var a=arguments.length,s=Array(a),C=0;C<a;C++)s[C]=i[C];return t=r=l(this,(e=n.__proto__||Object.getPrototypeOf(n)).call.apply(e,[this].concat(s))),r.state={capture:!0},r._recordCurrentState=function(){var e=r._input;e&&r._recordChange({value:e.value,selectionStart:e.selectionStart,selectionEnd:e.selectionEnd})},r._getLines=function(e,t){return e.substring(0,t).split("\n")},r._recordChange=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=r._history,i=n.stack,a=n.offset;if(i.length&&a>-1){r._history.stack=i.slice(0,a+1);var l=r._history.stack.length;if(l>b){var s=l-b;r._history.stack=i.slice(s,l),r._history.offset=Math.max(r._history.offset-s,0)}}var c=Date.now();if(t){var u=r._history.stack[r._history.offset];if(u&&c-u.timestamp<_){var f=/[^a-z0-9]([a-z0-9]+)$/i,d=r._getLines(u.value,u.selectionStart).pop().match(f),p=r._getLines(e.value,e.selectionStart).pop().match(f);if(d&&p&&p[1].startsWith(d[1]))return void(r._history.stack[r._history.offset]=o({},e,{timestamp:c}))}}r._history.stack.push(o({},e,{timestamp:c})),r._history.offset++},r._updateInput=function(e){var t=r._input;t&&(t.value=e.value,t.selectionStart=e.selectionStart,t.selectionEnd=e.selectionEnd,r.props.onValueChange(e.value))},r._applyEdits=function(e){var t=r._input,n=r._history.stack[r._history.offset];n&&t&&(r._history.stack[r._history.offset]=o({},n,{selectionStart:t.selectionStart,selectionEnd:t.selectionEnd})),r._recordChange(e),r._updateInput(e)},r._undoEdit=function(){var e=r._history,t=e.offset,n=e.stack[t-1];n&&(r._updateInput(n),r._history.offset=Math.max(t-1,0))},r._redoEdit=function(){var e=r._history,t=e.stack,n=e.offset,o=t[n+1];o&&(r._updateInput(o),r._history.offset=Math.min(n+1,t.length-1))},r._handleKeyDown=function(e){var t=r.props,n=t.tabSize,o=t.insertSpaces,i=t.ignoreTabKey,a=t.onKeyDown;if(!a||(a(e),!e.defaultPrevented)){var l=e.target,s=l.value,b=l.selectionStart,_=l.selectionEnd,C=(o?" ":"     ").repeat(n);if(e.keyCode===u&&!i&&r.state.capture)if(e.preventDefault(),e.shiftKey){var E=r._getLines(s,b),O=E.length-1,w=r._getLines(s,_).length-1,x=s.split("\n").map(function(e,t){return t>=O&&t<=w&&e.startsWith(C)?e.substring(C.length):e}).join("\n");if(s!==x)r._applyEdits({value:x,selectionStart:E[O].startsWith(C)?b-C.length:b,selectionEnd:_-(s.length-x.length)})}else if(b!==_){var K=r._getLines(s,b),j=K.length-1,I=r._getLines(s,_).length-1,P=K[j];r._applyEdits({value:s.split("\n").map(function(e,t){return t>=j&&t<=I?C+e:e}).join("\n"),selectionStart:/\S/.test(P)?b+C.length:b,selectionEnd:_+C.length*(I-j+1)})}else{var D=b+C.length;r._applyEdits({value:s.substring(0,b)+C+s.substring(_),selectionStart:D,selectionEnd:D})}else if(e.keyCode===f){var L=b!==_;if(s.substring(0,b).endsWith(C)&&!L){e.preventDefault();var M=b-C.length;r._applyEdits({value:s.substring(0,b-C.length)+s.substring(_),selectionStart:M,selectionEnd:M})}}else if(e.keyCode===c){if(b===_){var T=r._getLines(s,b).pop().match(/^\s+/);if(T&&T[0]){e.preventDefault();var R="\n"+T[0],z=b+R.length;r._applyEdits({value:s.substring(0,b)+R+s.substring(_),selectionStart:z,selectionEnd:z})}}}else if(e.keyCode===h||e.keyCode===g||e.keyCode===m||e.keyCode===v){var A=void 0;e.keyCode===h&&e.shiftKey?A=["(",")"]:e.keyCode===g?A=e.shiftKey?["{","}"]:["[","]"]:e.keyCode===m?A=e.shiftKey?['"','"']:["'","'"]:e.keyCode!==v||e.shiftKey||(A=["`","`"]),b!==_&&A&&(e.preventDefault(),r._applyEdits({value:s.substring(0,b)+A[0]+s.substring(b,_)+A[1]+s.substring(_),selectionStart:b,selectionEnd:_+2}))}else(k?e.metaKey&&e.keyCode===p:e.ctrlKey&&e.keyCode===p)&&!e.shiftKey&&!e.altKey?(e.preventDefault(),r._undoEdit()):(k?e.metaKey&&e.keyCode===p&&e.shiftKey:S?e.ctrlKey&&e.keyCode===d:e.ctrlKey&&e.keyCode===p&&e.shiftKey)&&!e.altKey?(e.preventDefault(),r._redoEdit()):e.keyCode!==y||!e.ctrlKey||k&&!e.shiftKey||(e.preventDefault(),r.setState(function(e){return{capture:!e.capture}}))}},r._handleChange=function(e){var t=e.target,n=t.value;r._recordChange({value:n,selectionStart:t.selectionStart,selectionEnd:t.selectionEnd},!0),r.props.onValueChange(n)},r._history={stack:[],offset:-1},l(r,t)}return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+t(n));e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)}(n,a.Component),i(n,[{key:"componentDidMount",value:function(){this._recordCurrentState()}},{key:"render",value:function(){var e=this,t=this.props,n=t.value,r=t.style,i=t.padding,l=t.highlight,s=t.textareaId,c=t.autoFocus,u=t.disabled,f=t.form,d=t.maxLength,p=t.minLength,y=t.name,h=t.placeholder,g=t.readOnly,m=t.required,v=t.onClick,b=t.onFocus,_=t.onBlur,S=t.onKeyUp,k=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(t,["value","style","padding","highlight","textareaId","autoFocus","disabled","form","maxLength","minLength","name","placeholder","readOnly","required","onClick","onFocus","onBlur","onKeyUp","onKeyDown","onValueChange","tabSize","insertSpaces","ignoreTabKey"]),E={paddingTop:i,paddingRight:i,paddingBottom:i,paddingLeft:i},w=l(n);return a.createElement("div",o({},k,{style:o({},O.container,r)}),a.createElement("textarea",{ref:function(t){return e._input=t},style:o({},O.editor,O.textarea,E),className:C,id:s,value:n,onChange:this._handleChange,onKeyDown:this._handleKeyDown,onClick:v,onKeyUp:S,onFocus:b,onBlur:_,disabled:u,form:f,maxLength:d,minLength:p,name:y,placeholder:h,readOnly:g,required:m,autoFocus:c,autoCapitalize:"off",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"data-gramm":!1}),a.createElement("pre",o({"aria-hidden":"true",style:o({},O.editor,O.highlight,E)},"string"==typeof w?{dangerouslySetInnerHTML:{__html:w+"<br />"}}:{children:w})),a.createElement("style",{type:"text/css",dangerouslySetInnerHTML:{__html:"\n/**\n * Reset the text fill color so that placeholder is visible\n */\n.npm__react-simple-code-editor__textarea:empty {\n  -webkit-text-fill-color: inherit !important;\n}\n\n/**\n * Hack to apply on some CSS on IE10 and IE11\n */\n@media all and (-ms-high-contrast: none), (-ms-high-contrast: active) {\n  /**\n    * IE doesn't support '-webkit-text-fill-color'\n    * So we use 'color: transparent' to make the text transparent on IE\n    * Unlike other browsers, it doesn't affect caret color in IE\n    */\n  .npm__react-simple-code-editor__textarea {\n    color: transparent !important;\n  }\n\n  .npm__react-simple-code-editor__textarea::selection {\n    background-color: #accef7 !important;\n    color: transparent !important;\n  }\n}\n"}}))}},{key:"session",get:function(){return{history:this._history}},set:function(e){this._history=e.history}}]),n}();E.defaultProps={tabSize:2,insertSpaces:!0,ignoreTabKey:!1,padding:0},r.default=E;var O={container:{position:"relative",textAlign:"left",whiteSpace:"pre-wrap",wordBreak:"keep-all",boxSizing:"border-box",padding:0},textarea:{position:"absolute",top:0,left:0,height:"100%",width:"100%",margin:0,border:0,resize:"none",background:"none",overflow:"hidden",color:"inherit",MozOsxFontSmoothing:"grayscale",WebkitFontSmoothing:"antialiased",WebkitTextFillColor:"transparent"},highlight:{position:"relative",margin:0,border:0,pointerEvents:"none"},editor:{boxSizing:"inherit",display:"inherit",fontFamily:"inherit",fontSize:"inherit",fontStyle:"inherit",fontVariantLigatures:"inherit",fontWeight:"inherit",letterSpacing:"inherit",lineHeight:"inherit",tabSize:"inherit",textIndent:"inherit",textRendering:"inherit",textTransform:"inherit",whiteSpace:"inherit",wordBreak:"inherit"}}}(c={exports:{}},c.exports),c.exports),d=(u=f)&&u.__esModule&&Object.prototype.hasOwnProperty.call(u,"default")?u.default:u,p=e.useEffect,y=e.useReducer,h=e.useCallback,g=e.useRef;function m(e){return{end:e.selectionEnd,start:e.selectionStart}}return function(t){var n,s=t.initialValue,c=t.formatCode,u=t.formatOnSave,f=i(t,["initialValue","formatCode","formatOnSave"]),v=a(y((n={formatCode:c},function(e,t){switch(t.type){case"EDIT":return o({},e,{code:t.payload});case"COMMENT_LINE":var r=t.payload,i=r.lineNumber,a=r.selectionState,s=!1,c=e.code.split("\n").reduce(function(e,t,n){return n+1===i?(t.startsWith("// ")&&(s=!0),[].concat(l(e),[t.startsWith("// ")?t.split("// ")[1]:"// ".concat(t)])):[].concat(l(e),[t])},[]).join("\n");return o({},e,{selectionState:a,code:c,didRemoveComment:s});case"FORMAT_CODE":return o({},e,{code:n.formatCode(e.code),selectionState:t.payload});default:return e}}),{code:s,selectionState:{end:0,start:0},didRemoveComment:!1}),2),b=v[0],_=v[1],S=g(null),k=g(!1);p(function(){S.current=document.querySelector("#react-complex-code-editor--element"),k.current=navigator.userAgent.includes("Mac OS X")},[]),p(function(){S.current.selectionEnd=b.didRemoveComment?b.selectionState.start-3:b.selectionState.start+3,S.current.selectionStart=b.didRemoveComment?b.selectionState.start-3:b.selectionState.start+3},[b.selectionState,b.didRemoveComment]);var C=h(function(e){if("/"===e.key&&k.current&&e.metaKey||"/"===e.key&&!k.current&&e.ctrlKey){var t=m(S.current),n=b.code.substr(0,t.start).split("\n").length;_({type:"COMMENT_LINE",payload:{lineNumber:n,selectionState:t}})}else if(u&&"function"==typeof c&&("s"===e.key&&k.current&&e.metaKey||"s"===e.key&&!k.current&&e.ctrlKey)){var r=m(S.current);e.preventDefault(),_({type:"FORMAT_CODE",payload:r})}},[b.code]),E=h(function(e){_({type:"EDIT",payload:e})},[]);return e.createElement(d,r({},f,{value:b.code,onValueChange:E,textareaId:"react-complex-code-editor--element",onKeyDown:C}))}});
//# sourceMappingURL=index.umd.js.map
